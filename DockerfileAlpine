FROM node:alpine
WORKDIR /root
RUN apk add --no-cache --virtual .build-deps \
        vim
RUN git clone --recursive https://github.com/jcirizar/vim.git \
    && ln -sf vim ~/.vim \
    && ln -sf vim/vimrc ~/.vimrc
RUN vim -u NONE -c "helptags vim-gitgutter/doc" -c q
RUN npm install -g tslint prettier eslint typescript
RUN cd ~/.vim/pack/plugins/start \ 
    && curl --fail -L https://github.com/neoclide/coc.nvim/archive/release.tar.gz|tar xzfv -
RUN vim -c 'CocInstall -sync coc-eslint coc-prettier coc-json coc-tsserver coc-tslint-plugin|q'

WORKDIR /app
CMD ["vim", "."]
